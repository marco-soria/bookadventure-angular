<div class="min-h-screen bg-base-200 flex items-center justify-center p-4">
  <div class="card w-full max-w-md bg-base-100 shadow-xl">
    <div class="card-body">
      <!-- Header -->
      <div class="text-center mb-6">
        <h1 class="text-3xl font-bold text-primary">Join Book Adventure</h1>
        <p class="text-base-content/70 mt-2">
          Create your account to start your literary journey
        </p>
      </div>

      <!-- Error Alert -->
      @if (error()) {
      <div class="alert alert-error mb-4">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="stroke-current shrink-0 h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <span>{{ error() }}</span>
        <button class="btn btn-sm btn-ghost" (click)="clearError()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>
      </div>
      }

      <!-- Register Form -->
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <!-- First Name Field -->
        <div class="form-control w-full mb-4">
          <label class="label">
            <span class="label-text font-medium">First Name</span>
          </label>
          <input
            type="text"
            placeholder="Enter your first name"
            class="input input-bordered w-full"
            [class.input-error]="firstName?.invalid && firstName?.touched"
            formControlName="firstName"
          />
          @if (firstName?.invalid && firstName?.touched) {
          <label class="label">
            @if (firstName?.errors?.['required']) {
            <span class="label-text-alt text-error"
              >First name is required</span
            >
            } @if (firstName?.errors?.['minlength']) {
            <span class="label-text-alt text-error"
              >First name must be at least 2 characters</span
            >
            }
          </label>
          }
        </div>

        <!-- Last Name Field -->
        <div class="form-control w-full mb-4">
          <label class="label">
            <span class="label-text font-medium">Last Name</span>
          </label>
          <input
            type="text"
            placeholder="Enter your last name"
            class="input input-bordered w-full"
            [class.input-error]="lastName?.invalid && lastName?.touched"
            formControlName="lastName"
          />
          @if (lastName?.invalid && lastName?.touched) {
          <label class="label">
            @if (lastName?.errors?.['required']) {
            <span class="label-text-alt text-error">Last name is required</span>
            } @if (lastName?.errors?.['minlength']) {
            <span class="label-text-alt text-error"
              >Last name must be at least 2 characters</span
            >
            }
          </label>
          }
        </div>

        <!-- Email Field -->
        <div class="form-control w-full mb-4">
          <label class="label">
            <span class="label-text font-medium">Email</span>
          </label>
          <input
            type="email"
            placeholder="Enter your email"
            class="input input-bordered w-full"
            [class.input-error]="email?.invalid && email?.touched"
            formControlName="email"
          />
          @if (email?.invalid && email?.touched) {
          <label class="label">
            @if (email?.errors?.['required']) {
            <span class="label-text-alt text-error">Email is required</span>
            } @if (email?.errors?.['email']) {
            <span class="label-text-alt text-error"
              >Please enter a valid email</span
            >
            }
          </label>
          }
        </div>

        <!-- Document Number Field -->
        <div class="form-control w-full mb-4">
          <label class="label">
            <span class="label-text font-medium">Document Number</span>
          </label>
          <input
            type="text"
            placeholder="Enter your document number"
            class="input input-bordered w-full"
            [class.input-error]="
              documentNumber?.invalid && documentNumber?.touched
            "
            formControlName="documentNumber"
          />
          @if (documentNumber?.invalid && documentNumber?.touched) {
          <label class="label">
            @if (documentNumber?.errors?.['required']) {
            <span class="label-text-alt text-error"
              >Document number is required</span
            >
            } @if (documentNumber?.errors?.['minlength']) {
            <span class="label-text-alt text-error"
              >Document number must be at least 8 characters</span
            >
            }
          </label>
          }
        </div>

        <!-- Age Field -->
        <div class="form-control w-full mb-4">
          <label class="label">
            <span class="label-text font-medium">Age</span>
          </label>
          <input
            type="number"
            placeholder="Enter your age"
            class="input input-bordered w-full"
            [class.input-error]="age?.invalid && age?.touched"
            formControlName="age"
            min="18"
            max="120"
          />
          @if (age?.invalid && age?.touched) {
          <label class="label">
            @if (age?.errors?.['required']) {
            <span class="label-text-alt text-error">Age is required</span>
            } @if (age?.errors?.['min']) {
            <span class="label-text-alt text-error"
              >Must be at least 18 years old</span
            >
            } @if (age?.errors?.['max']) {
            <span class="label-text-alt text-error"
              >Age must be less than 120</span
            >
            }
          </label>
          }
        </div>

        <!-- Password Field -->
        <div class="form-control w-full mb-4">
          <label class="label">
            <span class="label-text font-medium">Password</span>
          </label>
          <div class="relative">
            <input
              [type]="showPassword() ? 'text' : 'password'"
              placeholder="Create a password"
              class="input input-bordered w-full pr-12"
              [class.input-error]="password?.invalid && password?.touched"
              formControlName="password"
            />
            <button
              type="button"
              class="absolute inset-y-0 right-0 pr-3 flex items-center"
              (click)="togglePasswordVisibility()"
            >
              @if (showPassword()) {
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 text-gray-400"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"
                />
              </svg>
              } @else {
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 text-gray-400"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.543 7-1.274 4.057-5.065 7-9.543 7-4.477 0-8.268-2.943-9.542-7z"
                />
              </svg>
              }
            </button>
          </div>
          @if (password?.invalid && password?.touched) {
          <label class="label">
            @if (password?.errors?.['required']) {
            <span class="label-text-alt text-error">Password is required</span>
            } @if (password?.errors?.['minlength']) {
            <span class="label-text-alt text-error"
              >Password must be at least 6 characters</span
            >
            }
          </label>
          }
        </div>

        <!-- Confirm Password Field -->
        <div class="form-control w-full mb-6">
          <label class="label">
            <span class="label-text font-medium">Confirm Password</span>
          </label>
          <div class="relative">
            <input
              [type]="showConfirmPassword() ? 'text' : 'password'"
              placeholder="Confirm your password"
              class="input input-bordered w-full pr-12"
              [class.input-error]="
                (confirmPassword?.invalid && confirmPassword?.touched) ||
                passwordMismatch
              "
              formControlName="confirmPassword"
            />
            <button
              type="button"
              class="absolute inset-y-0 right-0 pr-3 flex items-center"
              (click)="toggleConfirmPasswordVisibility()"
            >
              @if (showConfirmPassword()) {
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 text-gray-400"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"
                />
              </svg>
              } @else {
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 text-gray-400"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.543 7-1.274 4.057-5.065 7-9.543 7-4.477 0-8.268-2.943-9.542-7z"
                />
              </svg>
              }
            </button>
          </div>
          @if (confirmPassword?.invalid && confirmPassword?.touched) {
          <label class="label">
            @if (confirmPassword?.errors?.['required']) {
            <span class="label-text-alt text-error"
              >Please confirm your password</span
            >
            }
          </label>
          } @if (passwordMismatch) {
          <label class="label">
            <span class="label-text-alt text-error"
              >Passwords do not match</span
            >
          </label>
          }
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="btn btn-primary w-full"
          [disabled]="isLoading()"
        >
          @if (isLoading()) {
          <span class="loading loading-spinner loading-sm"></span>
          Creating account... } @else { Create Account }
        </button>
      </form>

      <!-- Divider -->
      <div class="divider mt-6">Or</div>

      <!-- Login Link -->
      <div class="text-center">
        <p class="text-base-content/70">
          Already have an account?
          <a routerLink="/login" class="link link-primary font-medium"
            >Sign in</a
          >
        </p>
      </div>

      <!-- Back to Home -->
      <div class="text-center mt-4">
        <a routerLink="/" class="link link-neutral text-sm">← Back to Home</a>
      </div>
    </div>
  </div>
</div>
